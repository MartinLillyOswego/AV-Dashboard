<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tuning Menu</title>
    <link rel="stylesheet" type="text/css" href="static/tuning_menu.css" />
</head>

<body style="background-color:#30302f; color: #c7c8c9; font-family: Trebuchet MS" onload="onLoad()">
    <div id="top_bar">
        <p><u><b id="label" style="color:white; font-size: 24px;" >Tuning Menu:</b></u></p>

        <!-- back button -->
        <form id="buttonDash" action="/">
        <button class="buttonSty" style="color:#307dc9; width:80px; font-family: Trebuchet MS; color:#bacfc8; font-size:18px" type="submit" >Dashboard</button>
        </form>

    </div>

    <!-- holds all submission boxes -->
    <div id="main">

        <!-- enable / disable carla -->
        <form id="carla" action="/open_config">
            <p style="font-family: Trebuchet MS;color:white">Use Carla As Input:
            <label> <input name="carla_state" id="carla_state_box" style="color:white; background-color:#4a4946"
                           type="submit" />
            </label></p>
        </form>

        <!-- input for serial port -->
        <form id="serial" action="/open_config">
            <p style="font-family: Trebuchet MS;color:white">Radio's Serial Port:
            <label> <input style="background-color:#4a4946" name="serial_port" type="text">
                    <input style="color:white; background-color:#4a4946" type = "submit" value = "Submit" />
                    <span id="serial_text" style="color: white; font-family: Trebuchet MS "></span>
            </label></p>
        </form>

        <!-- input for max speed -->
        <form id="max_speed" action="/open_config">
            <p style="font-family: Trebuchet MS;color:white">Maximum Allowed Speed:
            <label> <input style="background-color:#4a4946" name="max_speed" type="text">
                    <input style="color:white; background-color:#4a4946" type = "submit" value = "Submit" />
                    <span id="max_speed_text" style="color: white; font-family: Trebuchet MS "></span>
            </label></p>
        </form>

    </div>
    <div id="bottom_bar">
        <span id="responce" style="color: #c7c8c9; font-family: Trebuchet MS "></span>
    </div>
</body>
</html>

<!-- runs on load -->
<script type="text/javascript">
  async function onLoad() {
    const response = await fetch("/config_data");
    const data = await response.json();
    document.getElementById("serial_text").innerText = "Operating Value: " + data.serial_port;
    document.getElementById("max_speed_text").innerText = "Operating Value: " + data.max_speed;
    document.querySelector('#carla_state_box').value = data.carla_state;
    document.getElementById("responce").innerText = data.responce_text;
    }
</script>